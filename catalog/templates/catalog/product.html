{% extends 'catalog/base.html' %}
{% load my_tags %}
{% block title %}Skystore: {{ product.product_name }}{% endblock %}

{% block content %}
<!-- Основной блок с информацией о продукте -->
<div class="container">
    <div class="row align-items-center mb-5">
        <!-- Название продукта -->
        <div class="col-md-10 text-center">
            <h1 class="display-4 text-color product-title-product-page">{{ product.product_name }}</h1>
        </div>
        <!-- Изображение продукта -->
        <div class="col-md-2 text-center">
            <img src="{{ product.image | media_filter}}" alt="Изображение продукта" class="product-image">
        </div>
    </div>
    <!-- Параметры продукта -->
    <div class="product-parameters mb-5">
        <p class="mb-4"><strong>ОПИСАНИЕ: </strong>{{ product.description }}</p>
        <p class="mb-4"><strong>КАТЕГОРИЯ: </strong>{{ product.category }}</p>
        <p class="mb-4"><strong>ЦЕНА: </strong>$ {{ product.price }}</p>
        <small class="text-muted-secondary">Дата последнего обновления продукта: {{ product.updated_at | date:"d M Y" }}</small>
    </div>
    <!-- Пользовательские кнопки -->
    <div class="text-center mb-5">
        <a href="#" class="btn btn-lg btn-primary me-3">Купить</a>
        <a href="{% url 'catalog:home_page' %}" class="btn btn-lg btn-outline-primary me-3">Назад</a>
        <a href="{% url 'catalog:update_product_page' product.pk %}" class="btn btn-lg btn-outline-warning me-3">Редактировать</a>
        <a href="{% url 'catalog:product_confirm_delete_page' product.pk %}" class="btn btn-lg btn-outline-danger me-3">Удалить</a>
    </div>
    <!-- Кнопки для модератора (опубликовать / снять с публикации -->
    <div class="text-center mb-5">
        {% if perms.catalog.can_unpublish_product %}
        <form action="{% url 'catalog:product_publication' product.pk %}" method="post">
            {% csrf_token %}
            {% if product.is_published %}
            <button type="submit" class="btn btn-warning">Отменить публикацию продукта</button>
            {% else %}
            <button type="submit" class="btn btn-success">Подтвердить публикацию продукта</button>
            {% endif %}
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}